<h2>Tarefas Atuais</h2>

<div class="controls-container">
  <div class="search-controls">
    <input
      type="text"
      [ngModel]="searchTerm()"
      (ngModelChange)="searchTerm.set($event); searchChange.emit($event)"
      placeholder="Pesquisar por título ou descrição..."
    />
  </div>

  <div class="filter-controls">
    <label for="filterStatus">Filtrar por Status:</label>
    <select
      id="filterStatus"
      [ngModel]="filterStatus()"
      (ngModelChange)="filterStatus.set($event); filterChange.emit($event)"
    >
      <option value="todos">Mostrar Todos</option>
      <option value="pendente">Pendente</option>
      <option value="em-andamento">Em Andamento</option>
      <option value="concluida">Concluída</option>
    </select>
  </div>
</div>

<div class="task-list">
  @for (task of tasks; track task.id) {
    <app-task-card
      [task]="task"
      (edit)="editTask.emit($event)"
      (complete)="completeTask.emit($event)"
      (delete)="openDeleteModal($event)"
    />
  } @empty {
    <p class="no-tasks">Nenhuma tarefa encontrada. Que tal criar uma?</p>
  }
</div>

@if (isDeleteModalOpen()) {
  <div class="modal-backdrop">
    <div class="modal-content">
      <h3>Confirmação de Exclusão</h3>
      <p>Tem certeza que deseja excluir a tarefa: <strong>"{{ taskToDelete()?.title }}"</strong>?</p>
      <div class="modal-actions">
        <button class="cancel-btn" (click)="closeDeleteModal()">Cancelar</button>
        <button class="delete-btn" (click)="confirmDelete()">Sim, Excluir</button>
      </div>
    </div>
  </div>
}
