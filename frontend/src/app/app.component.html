<div class="container">
  <h1>Gerenciador de Tarefas</h1>

  <div class="task-form">
    <h2>Nova Tarefa</h2>

    <!-- Formulário de Nova Tarefa/Edição -->
    <input [(ngModel)]="currentTitle" placeholder="Título" />
    <input [(ngModel)]="currentDescription" placeholder="Descrição" />

    <select [(ngModel)]="currentStatus">
      <!-- Opções de status da tarefa -->
      <option value="pendente">Pendente</option>
      <option value="em-andamento">Em Andamento</option>
      <option value="concluida">Concluída</option>
    </select>

    <div class="form-actions">
      <!-- Lógica para mostrar Adicionar ou Salvar/Cancelar -->
      @if (!editingTask) {
        <!-- Botão Adicionar Tarefa (aparece se não estiver editando) -->
        <button (click)="createTask()">Adicionar Tarefa</button>
      } @else {
        <!-- Botões Salvar e Cancelar (aparecem se estiver editando) -->
        <button (click)="updateTask()">Salvar Alterações</button>
        <button class="cancel-btn" (click)="cancelEdit()">Cancelar</button>
      }
    </div>
  </div>

  <h2>Tarefas Atuais</h2>

  <div class="task-list">
    <!-- Lista de Tarefas (Itera sobre a coleção 'tasks') -->
    @for (task of tasks; track task.id) {
      <div class="task-card">
        <div class="task-info">
          <h3>{{ task.title }}</h3>
          <p>{{ task.description }}</p>
        </div>

        <!-- Status da Tarefa com classe CSS dinâmica -->
        <div class="task-status status-{{ task.status }}">
          {{ task.status | titlecase }}
        </div>

        <div class="task-actions">
          <!-- Botões de Ação para cada tarefa -->
          <button class="edit-btn" (click)="editTask(task)">Editar</button>
          <button class="delete-btn" (click)="deleteTask(task.id)">Excluir</button>
        </div>
      </div>
    }
    @empty {
      <p style="text-align: center; color: #888;">Nenhuma tarefa encontrada. Adicione uma nova!</p>
    }
  </div>
</div>
